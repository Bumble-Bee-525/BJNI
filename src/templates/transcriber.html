<!doctype html>
<html lang="en">
  <head>
    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!--Favicon and tab title-->
    <link rel="icon" type="image/x-icon" href="../static/images/favicon.png">
    <title>DNA transcriber</title>
  </head>
  <body>
    <!--Navbar-->
    <nav class="navbar navbar-expand-lg" style="background-color: #e3f2fd;">
      <div class="container-fluid">
        <!--Logo-->
        <a class="navbar-brand" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">
          <img src="../static/images/logoBJ.png" width="auto" style="height: 4rem;">
        </a>
        <!--Toggle button for small devices-->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-expanded="false">
          <span class="navbar-toggler-icon"></span>
        </button>
        <!--Searchbar for NCBI-->
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
          <div class="navbar-nav">
            <a class="nav-link mx-2" href="/templates/about.html">About us</a>
            <a class="nav-link mx-2" href="/">Home</a>
          </div>
        </div>
      </div>
    </nav>
    <p class="w-75 text-center" style="margin: auto;">Program by Bradley Liang under Bradley Jake Neilson Industries</p>
    <p class="w-75 text-center" style="margin: auto;">Copyright 2024 All Rights Reserved</p>
    <p class="w-75 text-center" style="margin: auto;">Credit us or else we will airstrike u.</p>
    <br>
    <div class="mx-auto mt-5 w-75">
        <h2>Enter all the appropiate info below, with question marks for unknown bases, then click the green button. NOTE: if you need to, you can just leave a box blank and not type a bunch of question marks</h2>
        <div class="mb-3 mx-auto w-75">
            <label for="codingInput" class="form-label">Enter coding strand (enter ? for unknown bases)</label>
            <input type="text" class="form-control" id="codingInput">
        </div>
        <div class="mb-3 mx-auto w-75">
            <label for="noncodingInput" class="form-label">Enter non-coding strand (enter ? for unknown bases)</label>
            <input type="text" class="form-control" id="noncodingInput">
        </div>
        <div class="mb-3 mx-auto w-75">
            <label for="mrnaInput" class="form-label">Enter mRNA (enter ? for unknown bases)</label>
            <input type="text" class="form-control" id="mrnaInput">
        </div>
        <div class="mb-3 mx-auto w-75">
            <label for="anticodonInput" class="form-label">Enter anticodons (enter ? for unknown bases)</label>
            <input type="text" class="form-control" id="anticodonInput">
        </div>
        <div class="mb-3 mx-auto w-75">
            <button type="button" class="btn btn-success" onclick="doStuff()">Do stuff</button>
        </div>
        <div class="mb-3">
            <label for="out" class="form-label">When button pressed, output will appear below</label>
            <textarea class="form-control" rows="7" disabled id="out"></textarea>
        </div>
    </div>

    <script>
        //credit to 'juanfal' on Github for making this, this probably took that guy ages
        const codonTable =
        {
            'TCA': 'Ser',
            'TCC': 'Ser',
            'TCG': 'Ser',
            'TCT': 'Ser',
            'TTC': 'Phe',
            'TTT': 'Phe',
            'TTA': 'Leu',
            'TTG': 'Leu',
            'TAC': 'Tyr',
            'TAT': 'Tyr',
            'TAA': 'STOP',
            'TAG': 'STOP',
            'TGC': 'Cys', 
            'TGT': 'Cys',
            'TGA': 'STOP',
            'TGG': 'Trp',
            'CTA': 'Leu',
            'CTC': 'Leu',
            'CTG': 'Leu',
            'CTT': 'Leu',
            'CCA': 'Pro',
            'CCC': 'Pro',
            'CCG': 'Pro',
            'CCT': 'Pro',
            'CAC': 'His',
            'CAT': 'His',
            'CAA': 'Glu',
            'CAG': 'Glu',
            'CGA': 'Arg',
            'CGC': 'Arg',
            'CGG': 'Arg',
            'CGT': 'Arg',
            'ATA': 'Lle',
            'ATC': 'Lle',
            'ATT': 'Lle',
            'ATG': 'Met',
            'ACA': 'Thr',
            'ACC': 'Thr',
            'ACG': 'Thr',
            'ACT': 'Thr',
            'AAC': 'Asn',
            'AAT': 'Asn',
            'AAA': 'Lys',
            'AAG': 'Lys',
            'AGC': 'Ser',
            'AGT': 'Ser',
            'AGA': 'Arg',
            'AGG': 'Arg',
            'GTA': 'Val',
            'GTC': 'Val',
            'GTG': 'Val',
            'GTT': 'Val',
            'GCA': 'Ala',
            'GCC': 'Ala',
            'GCG': 'Ala',
            'GCT': 'Ala',
            'GAC': 'Asp',
            'GAT': 'Asp', 
            'GAA': 'Glu',
            'GAG': 'Glu',
            'GGA': 'Gly',
            'GGC': 'Gly',
            'GGG': 'Gly',
            'GGT': 'Gly'
        };
        
        
        //this is probably a bad way to do this but i can't be bothered to do a smarter way
        const dna_dna = {
            "A": "T",
            "T": "A",
            "G": "C",
            "C": "G",
        };
        
        const dna_rna = {
            "A": "U",
            "T": "A",
            "G": "C",
            "C": "G",
        };
        
        const rna_dna = {
            "A": "T",
            "U": "A",
            "G": "C",
            "C": "G",
        };
        
        const rna_rna = {
            "A": "U",
            "U": "A",
            "G": "C",
            "C": "G",
        };
        
        function doStuff()
        {
            var coding = document.getElementById("codingInput").value.toUpperCase().replaceAll(" ", "");
            var noncoding = document.getElementById("noncodingInput").value.toUpperCase().replaceAll(" ", "");
            var mrna = document.getElementById("mrnaInput").value.toUpperCase().replaceAll(" ", "");
            var anticodon = document.getElementById("anticodonInput").value.toUpperCase().replaceAll(" ", "");
            
            var length = Math.max(coding.length, noncoding.length, mrna.length, anticodon.length);
            
            //this is kinda lazy but who cares
            var outcoding = "";
            var outnoncoding = "";
            var outmrna = "";
            var outanticodon = "";
            var outAA = "";
            
            //for each index
            for (let i = 0; i < length; i++)
            {
                //find the first functional index
                if("ATUGC".includes(coding[i]))
                {
                    console.log("coding");
                    //this code is a crime against humanity
                    outcoding += coding[i];
                    outnoncoding += dna_dna[coding[i]];
                    outmrna += dna_rna[dna_dna[coding[i]]];
                    outanticodon += rna_rna[dna_rna[dna_dna[coding[i]]]];
                }
                
                else if("ATUGC".includes(noncoding[i]))
                {
                    console.log("noncoding");
                    //this code is a crime against humanity
                    outcoding += dna_dna[noncoding[i]];
                    outnoncoding += noncoding[i];
                    outmrna += dna_rna[noncoding[i]];
                    outanticodon += rna_rna[dna_rna[noncoding[i]]];
                }
                
                
                else if ("ATUGC".includes(mrna[i]))
                {
                    console.log("mrna");
                    //this code is a crime against humanity
                    outcoding += dna_dna[rna_dna[mrna[i]]];
                    outnoncoding += rna_dna[mrna[i]];
                    outmrna += mrna[i];
                    outanticodon += rna_rna[mrna[i]];
                }
                
                else
                {
                    console.log("anticodon");
                    //this code is a crime against humanity
                    outcoding += dna_dna[rna_dna[rna_rna[anticodon[i]]]];
                    outnoncoding += rna_dna[rna_rna[anticodon[i]]];
                    outmrna += rna_rna[anticodon[i]];
                    outanticodon += anticodon[i];
                }
            }
            
            //to do: amino acid stuff
            //this is comically bad
            let outoutanticodon = "";
            
            let start = -1;
            let stop = -1;
            for (let i = 0; i < length - 2; i++)
            {
                //console.log(outcoding.substring(i, i + 3));
                if (outcoding.substring(i, i + 3) == "ATG")
                {
                    start = i;
                    break;
                }
                else
                {
                    outoutanticodon += "-";
                }
            }
            
            for (let i = start; i < length - 2 && start != -1; i += 3)
            {
                //console.log(outcoding.substring(i, i + 3));
                //console.log(codonTable[outcoding.substring(i, i + 3)]);
                
                let AA = codonTable[outcoding.substring(i, i + 3)];
                if (AA == "STOP")
                {
                    outoutanticodon += "ðŸ›‘";
                    stop = i + 3;
                    break;
                }
                else
                {
                    outoutanticodon += outanticodon.substring(i, i + 3);
                    outAA += AA + " ";
                }
            }
            
            for (let i = stop; i < length && start != -1 && stop != -1; i++)
            {
                outoutanticodon += "-";
            }
            
            
            document.getElementById("out").value = "";
            document.getElementById("out").value += "coding:        " + outcoding + "\nnoncoding:  " + outnoncoding + "\nmrna:           " + outmrna + "\nanticodon:   " + outoutanticodon + "\namino acids: " + outAA;
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  </body>
</html>